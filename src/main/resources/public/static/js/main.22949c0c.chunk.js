(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{32:function(e,t,n){},33:function(e,t,n){},34:function(e,t,n){},37:function(e,t,n){},43:function(e,t,n){},45:function(e,t,n){},46:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n.n(c),r=n(23),s=n.n(r),i=(n(32),n(33),n(34),n(14)),o=n(3),l=n(15),u=n(11),d=n(10),j=n(18),b=n.n(j),f=n(24),h=n(9),m=function(e){var t,n="",c=Object(l.a)(e);try{for(c.s();!(t=c.n()).done;){var a=t.value;a===a.toUpperCase()&&(n+=" "),n+=a}}catch(r){c.e(r)}finally{c.f()}return n[0].toUpperCase(),n[0].toUpperCase()+n.substring(1)},O=n(1),p=function(e){var t=e.preference,n=e.score,c={businessFreedom:"#19ad51",commute:"#36cc24",costOfLiving:"#f3d630",economy:"#5c14a1",education:"#150e78",environmentalQuality:"#3d14a4",healthcare:"#051fa5",housing:"#f3c32c",internetAccess:"#b9117d",leisureCulture:"#d10d54",outdoors:"#f1351b",safety:"#0d6999",startups:"#f4eb33",taxation:"#88149f",tolerance:"#e70c26",travelConnectivity:"#7adc29",ventureCapital:"#d2ed31"};return Object(O.jsxs)("div",{className:"preference-row",children:[Object(O.jsx)("div",{className:"card-preference",children:m(t)},t),Object(O.jsx)("div",{className:"score-bar",style:{background:"linear-gradient(to right, ".concat(c[t]," ").concat(10*n,"%, #eee ").concat(n,"% ").concat(100-10*n,"%)"),color:c[t]},children:"."},n)]},t)},y=function(e){var t=e.city,n=e.sortedPreferences;return null===t?Object(O.jsxs)("div",{className:"city-detail-card",children:[Object(O.jsx)("h3",{children:"Your Top City"}),Object(O.jsx)("p",{}),Object(O.jsx)("h4",{children:"Loading..."})]}):Object(O.jsxs)("div",{className:"city-detail-card",children:[Object(O.jsxs)("h3",{children:["Your Top City: ",t.uaName+", "+t.uaCountry]}),n.map((function(e){return Object(O.jsx)(p,{preference:e.pref,score:Math.round(100*t[e.pref])/100},e.pref)})),Object(O.jsx)("br",{})]})},v=function(e){var t=e.city,n=e.index,a=e.sortedPreferences,r=Object(c.useState)(!1),s=Object(h.a)(r,2),i=s[0],o=s[1],l=Object(c.useState)(3),u=Object(h.a)(l,2),d=u[0],j=u[1],b=Object(c.useCallback)((function(){o(!i)}),[i]),f=Object(c.useCallback)((function(){j(3===d?17:3)}),[d]);if(null===t)return Object(O.jsx)("div",{className:"city-small-card",children:Object(O.jsx)("p",{children:"loading..."})});var m=t.uaName+", "+t.uaCountry;return Object(O.jsxs)("div",{className:"city-small-card",children:[Object(O.jsxs)("div",{className:"small-card-title",children:[Object(O.jsxs)("span",{children:[n,". ",m]}),Object(O.jsx)("span",{className:"small-card-toggle",onClick:function(){return b(!1)},children:i?"hide details":"show details"})]}),Object(O.jsxs)("div",{style:{display:i?"block":"none"},children:[a.slice(0,d).map((function(e){return Object(O.jsx)(p,{preference:e.pref,score:Math.round(100*t[e.pref])/100},e.pref)})),Object(O.jsx)("p",{className:"see-more-button",onClick:function(){return f()},children:"See More"})]})]})},x=n(27),g=(n(37),function(e){var t=e.value,n=e.name,a=e.step,r=e.min,s=e.max,i=e.linearGradientColor,o=e.rangeBackgroundColor,l=e.sliderThumbColor,u=e.onChange,d={businessFreedom:"The ability to start, operate, and close a business that represents the overall burden of regulation as well as the efficiency of government in the regulatory process.",commute:"Satisfaction with daily trips from home to work. Factors include traffic, roads, public transport infrastructure and more.",costOfLiving:"Measure of the affordability, including the price of food, utilities, rent and various goods and services.",economy:"The health of the economy, measured in terms GDP, employment and price stability.",education:"Quality of education, including student outcomes, student to teacher ratio, school environment, student & teacher satisfaction.",environmentalQuality:"Measure of the air quality, drinking water quality, urban greenery and general cleanliness of the city. ",healthcare:"Measure of the quality and price of healthcare as well as life expectancy.",housing:"Measure of the cost of renting in the country.",internetAccess:"Measure of the rate of internet access in the country as well as internet speed (download and upload).",leisureCulture:"Measure of quality and accessiblity of various activities in the city, ranging from art galleries, cinema to concerts and sports.",outdoors:"Measure of quality of outdoor activities, factors include water access, seaside acess, mountainous terrain, variable elevation.",safety:"Measured by crime rate, robberies, homicides, gun deaths, gun ownership",startups:"Measure by the number of startups, investors, startup events, and general startup climate.",taxation:"Measure of the company tax rates, income tax, time required to file taxes.",tolerance:"Measure of equality and discrimination towards minority groups, e.g. minority races and LGBT.",travelConnectivity:"Measure of Airport quality and intercity connectivity by trains.",ventureCapital:"Measure of the quanity of venture capital."},j=Object(x.a)({preferenceSlider:{"&::-webkit-slider-thumb":{backgroundColor:function(){return l},boxShadow:function(){return"0 0 0 1px #d7dcdf, 0 0 0 3px ".concat(l)}}},preferenceSliderValue:{backgroundColor:function(){return l},"&:after":{borderRight:function(){return"4px solid ".concat(l)}}}})(),b=Object(c.useRef)(),f=Object(c.useRef)();Object(c.useEffect)((function(){var e;!function(e){var t="linear-gradient(90deg, ".concat(i," 0% ").concat(100*e+"%",", ").concat(o," ").concat(100*e+"%"," 100%)");b.current.style.background=t}(t),e=t,f.current.style.top="".concat(15-78*e,"px")}),[t,i,o]);return Object(O.jsxs)("div",{className:"slider-container",onScroll:function(e){e.target.value+=.01,u(e,n)},children:[Object(O.jsxs)("h4",{className:"preference-text",children:[m(n),Object(O.jsx)("span",{className:"tooltip-text",children:d[n]})]}),Object(O.jsx)("input",{ref:b,className:"preference-slider ".concat(j.preferenceSlider),name:n,type:"range",min:r,max:s,value:t,step:a,onChange:function(e){u(e,n)}}),Object(O.jsx)("span",{ref:f,className:"preference-slider-value ".concat(j.preferenceSliderValue),children:t}),Object(O.jsx)("div",{className:"range-min-max-values"})]})}),C=(n(43),function(){var e={businessFreedom:.5,commute:.5,costOfLiving:.5,economy:.5,education:.5,environmentalQuality:.5,healthcare:.5,housing:.5,internetAccess:.5,leisureCulture:.5,outdoors:.5,safety:.5,startups:.5,taxation:.5,tolerance:.5,travelConnectivity:.5,ventureCapital:.5},t=Object(o.f)(),n=Object(c.useState)(t.state?t.state:e),a=Object(h.a)(n,2),r=a[0],s=a[1],i=Object(c.useState)([{}]),j=Object(h.a)(i,2),m=j[0],p=j[1],x=Object(c.useState)({Asia:!1,"North America":!1,"South America":!1,Africa:!1,Europe:!1,Oceania:!1}),C=Object(h.a)(x,2),k=C[0],w=C[1],M=Object(c.useState)([{}]),S=Object(h.a)(M,2),F=S[0],L=S[1],P=Object(c.useState)(),A=Object(h.a)(P,2),T=A[0],q=A[1],B=Object(c.useState)(6),G=Object(h.a)(B,2),Q=G[0],R=G[1],E=Object(c.useRef)(),Y=Object(c.useRef)();Object(c.useEffect)((function(){var e=function(){var e=Object(f.a)(b.a.mark((function e(){var t,n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat("","/city/"));case 3:return t=e.sent,e.next=6,t.json();case 6:(n=e.sent).sort((function(e,t){return e.score<t.score?1:-1})),p(N(n,r)),L(N(n,r)),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),q(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}();e()}),[]);var D=Object(c.useCallback)((function(e){var t=F.length;e&&Q<=t-12?R(Q+12):e&&Q<t?R(t):!e&&Q>=18?R(Q-12):!e&&Q>6&&R(6)}),[Q,F.length]),U=Object(c.useCallback)((function(e,t){s(Object(d.a)(Object(d.a)({},r),{},Object(u.a)({},t,parseFloat(e.target.value)))),p(N(m,r)),L(N(F,r))}),[r,m,F]),I=Object(c.useCallback)((function(e,t){var n=k,c=k[t];n[t]=!n[t],w(Object(d.a)(Object(d.a)({},k),{},Object(u.a)({},t,!c)));for(var a=[],r=0,s=Object.entries(n);r<s.length;r++){var i=Object(h.a)(s[r],2),o=i[0];!0===i[1]&&a.push(o)}if(a.length>0){var j,b=[],f=Object(l.a)(m);try{for(f.s();!(j=f.n()).done;){var O=j.value;a.includes(O.uaContinent)&&b.push(O)}}catch(p){f.e(p)}finally{f.f()}Q>b.length&&R(b.length),L(b)}else L(m)}),[k,m,Q]),J=Object(c.useCallback)((function(){var e=Object.keys(r);e=e.sort((function(e,t){return r[e]>r[t]?-1:1}));var t,n=[],c=Object(l.a)(e);try{for(c.s();!(t=c.n()).done;){var a=t.value;n.push({pref:a})}}catch(s){c.e(s)}finally{c.f()}return n}),[r]),V=Object(c.useMemo)((function(){return{step:.01,min:0,max:1,linearGradientColor:"#0a71b1",rangeBackgroundColor:"#d7dcdf",sliderThumbColor:"#0a71b1",onChange:function(e,t){return U(e,t)}}}),[U]),K=Object(c.useMemo)((function(){return{city:F[0],sortedPreferences:J()}}),[F,J]);return 1===m.length?Object(O.jsxs)("div",{className:"city-list-page",children:[Object(O.jsx)("h1",{children:T?"Could not load city data":"Loading..."}),Object(O.jsx)(y,{city:null},"null-card"),[1,2,3].map((function(e){return Object(O.jsx)(v,{city:null},e)}))]}):Object(O.jsxs)("div",{className:"city-list-page",children:[Object(O.jsxs)("div",{className:"topbar",children:[Object(O.jsx)("h1",{className:"city-list-title",children:"Your Preferred Cities"}),Object(O.jsx)("h4",{className:"modal-button",onClick:function(){Y.current.style.display="block"},children:"Filter"}),Object(O.jsx)("h4",{className:"modal-button",onClick:function(){E.current.style.display="block"},children:"Preferences"})]}),Object(O.jsx)("div",{ref:E,className:"slider-modal",children:Object(O.jsxs)("div",{className:"modal-content",children:[Object(O.jsxs)("div",{className:"modal-header",children:[Object(O.jsx)("span",{className:"close",onClick:function(){E.current.style.display="none"},children:"\xd7"}),Object(O.jsx)("h2",{children:"Adjust Your Preferences"})]}),Object(O.jsx)("div",{className:"modal-body",children:Object.keys(e).map((function(e){return Object(O.jsx)(g,Object(d.a)({value:r[e],name:e},V),e+"-slider")}))})]})}),Object(O.jsx)("div",{ref:Y,className:"filter-modal",children:Object(O.jsxs)("div",{className:"modal-content",children:[Object(O.jsxs)("div",{className:"modal-header",children:[Object(O.jsx)("span",{className:"close",onClick:function(){Y.current.style.display="none"},children:"\xd7"}),Object(O.jsx)("h2",{children:"Filter By Continent"})]}),Object(O.jsx)("div",{className:"modal-body",children:Object.keys(k).map((function(e){return Object(O.jsxs)("div",{className:"filter-checkbox-container",children:[Object(O.jsx)("input",{type:"checkbox",id:"".concat(e,"-checkbox"),name:e,value:e,checked:k[e],onChange:function(t){return I(t,e)}}),Object(O.jsx)("label",{htmlFor:"".concat(e,"-checkbox"),children:e})]},e)}))})]})}),Object(O.jsx)(y,Object(d.a)({},K),"active-card"),Object(O.jsxs)("div",{className:"card-grid",children:[F.slice(1,Q).map((function(e){return Object(O.jsx)(v,{city:e,index:F.indexOf(e)+1,sortedPreferences:K.sortedPreferences},e.uaName+e.uaCountry)})),Object(O.jsxs)("div",{className:"show-container",children:[Object(O.jsx)("span",{className:"show-more",onClick:function(){return D(!0)},style:{display:Q===F.length?"none":"inline"},children:"Show More"}),Object(O.jsx)("span",{className:"show-less",onClick:function(){return D(!1)},style:{display:6===Q?"none":"inline"},children:"Show Less"})]})]})]})});function N(e,t){for(var n=e,c=0;c<n.length;c++){for(var a=0,r=0,s=Object.keys(t);r<s.length;r++){var i=s[r];a+=n[c][i]*t[i]}try{n[c].score=a/17}catch(o){console.log("Key error, city has no property 'score'")}}return n.sort((function(e,t){return e.score>t.score?-1:1})),n}n(45);var k=function(){var e={businessFreedom:.5,commute:.5,costOfLiving:.5,economy:.5,education:.5,environmentalQuality:.5,healthcare:.5,housing:.5,internetAccess:.5,leisureCulture:.5,outdoors:.5,safety:.5,startups:.5,taxation:.5,tolerance:.5,travelConnectivity:.5,ventureCapital:.5},t=Object(c.useState)(e),n=Object(h.a)(t,2),a=n[0],r=n[1],s=Object(c.useCallback)((function(e,t){r(Object(d.a)(Object(d.a)({},a),{},Object(u.a)({},t,parseFloat(e.target.value))))}),[a]),o=Object(c.useMemo)((function(){return{step:.01,min:0,max:1,linearGradientColor:"#0a71b1",rangeBackgroundColor:"#d7dcdf",sliderThumbColor:"#0a71b1",onChange:function(e,t){return s(e,t)}}}),[s]);return Object(O.jsxs)("div",{className:"landing-page",children:[Object(O.jsx)("h2",{children:"Choose your city preferences"}),Object(O.jsx)("div",{className:"grid",children:Object.keys(e).map((function(e){return Object(O.jsx)(g,Object(d.a)({value:a[e],name:e},o),e+"-slider")}))}),Object(O.jsx)(i.b,{className:"link-btn",to:{pathname:"/cityList",state:a},children:"Discover My Cities"})]})},w=function(){return Object(O.jsx)("div",{children:Object(O.jsx)("h1",{children:"City Page"})})};var M=function(){return Object(O.jsx)("div",{className:"App",children:Object(O.jsx)(i.a,{children:Object(O.jsxs)(o.c,{children:[Object(O.jsx)(o.a,{path:"/cityList",children:Object(O.jsx)(C,{})}),Object(O.jsx)(o.a,{path:"/city/:cityName/Country/:countryName",children:Object(O.jsx)(w,{})}),Object(O.jsx)(o.a,{path:"/",children:Object(O.jsx)(k,{})})]})})})},S=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,47)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),c(e),a(e),r(e),s(e)}))};s.a.render(Object(O.jsx)(a.a.StrictMode,{children:Object(O.jsx)(M,{})}),document.getElementById("root")),S()}},[[46,1,2]]]);
//# sourceMappingURL=main.22949c0c.chunk.js.map